(this["webpackJsonpuj-against-humanity"]=this["webpackJsonpuj-against-humanity"]||[]).push([[0],{111:function(e,t,c){},156:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(113),i=c.n(a),r=c(64),o=c(8),s=c(22),u=c(4),d=c(159),j=c(114),l=c.n(j),b=c(2),m=l()(),O=Object(n.createContext)(),h=function(e){var t=Object(n.useState)(m),c=Object(u.a)(t,1)[0];return Object(b.jsx)(O.Provider,{value:c,children:e.children})},x=c(158),v=function(e){var t=e.players;return Object(b.jsx)(x.a.div,{id:"scoreboard",children:0===t.length?Object(b.jsx)(b.Fragment,{}):t.map((function(e){return Object(b.jsxs)(x.a.span,{children:[Object(b.jsx)(x.a.div,{className:"playerScore",children:Object(b.jsxs)(x.a.div,{children:[e.name," ",e.status,Object(b.jsx)("br",{}),"Points: ",e.points,Object(b.jsxs)(x.a.span,{style:{opacity:"0.2",marginLeft:"0.25em"},children:["[",e.id,"]"]})]})}),Object(b.jsx)("hr",{})]},"".concat(e.id,"1"))}))})},p=function(e){var t=e.chat,c=e.writeMessage;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(x.a.div,{children:Object(b.jsx)(x.a.div,{id:"chatLog",children:t.map((function(e){return Object(b.jsxs)("p",{children:[e.date," ",e.author,": ",e.sauce]})}))})}),Object(b.jsxs)(x.a.div,{className:"info_chat_input",children:[Object(b.jsx)("input",{id:"chatInput",placeholder:"Chat","aria-label":"Chat"}),Object(b.jsx)("button",{type:"button",onClick:c,children:"Send"})]})]})},f=function(){var e=Object(n.useContext)(O),t=Object(n.useState)(!0),c=Object(u.a)(t,2),a=c[0],i=c[1];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("button",{type:"button",onClick:function(){e.emit("reroll")},children:"Reroll cards"}),Object(b.jsx)("button",{type:"button",onClick:function(){a&&(i(!1),e.emit("skipBlack"),setTimeout((function(){i(!0)}),3e4))},id:"skipButton",children:"Skip black"})]})},C=c(160),y=function(e){var t=e.close,c=e.players,n=e.chat,a=e.writeMessage;return Object(b.jsx)(C.a,{children:Object(b.jsxs)(x.a.div,{initial:{opacity:0,x:-200},animate:{opacity:1,x:0},exit:{opacity:0,x:-200},transition:{duration:.2,delay:0},style:{pointerEvents:"auto"},className:"overlay",layout:!0,children:[Object(b.jsx)(f,{}),Object(b.jsxs)(x.a.div,{className:"info_score",children:[Object(b.jsxs)(x.a.div,{className:"title",children:["Scoreboard",Object(b.jsx)("hr",{})]}),Object(b.jsx)(v,{players:c})]}),Object(b.jsx)(x.a.div,{className:"info_chat",children:Object(b.jsx)(p,{chat:n,writeMessage:a})}),Object(b.jsx)(x.a.button,{onClick:function(){return t()},children:"Close"})]})})},g=function(e){var t=e.response,c=Object(n.useContext)(O);return Object(b.jsx)("button",{type:"button",id:"startButton",onClick:function(){c.emit("start")},disabled:t,children:"START"})},k=function(e){var t=e.response,c=Object(n.useContext)(O);return Object(b.jsxs)("div",{className:"navbar_points",children:["Score limit:",Object(b.jsxs)("select",{id:"pointsInput",defaultValue:"5",children:[Object(b.jsx)("option",{value:"1",children:"1"}),Object(b.jsx)("option",{value:"2",children:"2"}),Object(b.jsx)("option",{value:"3",children:"3"}),Object(b.jsx)("option",{value:"4",children:"4"}),Object(b.jsx)("option",{value:"5",children:"5"}),Object(b.jsx)("option",{value:"6",children:"6"}),Object(b.jsx)("option",{value:"7",children:"7"}),Object(b.jsx)("option",{value:"8",children:"8"}),Object(b.jsx)("option",{value:"9",children:"9"}),Object(b.jsx)("option",{value:"10",children:"10"})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"button",id:"pointsButton",onClick:function(){var e,t=(null===(e=document.getElementById("pointsInput"))||void 0===e?void 0:e.value)||5;t&&c.emit("setPoints",t)},disabled:t,children:"Select"})})]})},N=Object(n.createContext)([!1,void 0]),w=function(e){var t=Object(n.useState)(!1),c=Object(u.a)(t,2),a=c[0],i=c[1];return Object(b.jsx)(N.Provider,{value:[a,i],children:e.children})},S=function(){var e=Object(n.useContext)(N),t=Object(u.a)(e,2),c=t[0],a=t[1];return Object(b.jsx)("div",{className:"navbar_decks",children:Object(b.jsxs)("button",{onClick:function(){return a((function(e){return!e}))},children:["Drag cards ",c?"ON":"OFF"]})})},E=function(){var e=document.getElementById("chatLog");null!==e&&(e.scrollTop=e.scrollHeight)},F=function(){var e=Object(n.useContext)(O),t=Object(n.useState)(!1),c=Object(u.a)(t,2),a=c[0],i=c[1],r=Object(n.useState)(!1),o=Object(u.a)(r,2),j=o[0],l=o[1],m=Object(n.useState)([]),h=Object(u.a)(m,2),x=h[0],v=h[1],p=Object(n.useState)([]),f=Object(u.a)(p,2),C=f[0],N=f[1],w="not";function F(e){13===e.keyCode&&I()}var I=function(){var t;null!==(t=document.getElementById("chatInput"))&&(e.emit("message",t.value),t.value=""),E()};return Object(n.useEffect)((function(){document.addEventListener("keydown",F),e.on("message",(function(e){N((function(t){return[].concat(Object(s.a)(t),[e])})),E()})),e.on("recieveWhite",(function(e,t,c){N((function(e){return[].concat(Object(s.a)(e),[{date:"",author:"white card",sauce:"["+t.matchid+"] "+c.text}])})),E()})),e.on("sessionid",(function(e){w=e})),e.on("state",(function(e,t){var c=[];for(var n in e){var a=t[e[n]],i=a.name;a.id===w&&(i+=" (you)");var r="";a.tzar?r="tzar":a.played||(r="playing..."),c.push({name:i,status:r,points:a.points,id:e[n]})}v([].concat(c))})),e.on("startEnable",(function(e){i(!1)})),e.on("startDisable",(function(e){i(!0)}))}),[e]),Object(b.jsxs)("div",{className:"navbar",id:"player",children:[Object(b.jsx)(g,{response:a}),Object(b.jsx)(k,{response:a}),Object(b.jsx)(S,{}),Object(b.jsx)(d.a,{type:"crossfade",children:j&&Object(b.jsx)(y,{close:function(){return l(!1)},players:x,chat:C,writeMessage:I})}),Object(b.jsx)("button",{onClick:function(){return l((function(e){return!e}))},children:"Open info"})]})},I=Object(n.createContext)(0),B=function(e){var t=Object(n.useContext)(O),c=Object(n.useState)(0),a=Object(u.a)(c,2),i=a[0],r=a[1];return Object(n.useEffect)((function(){t.on("blackCard",(function(e){r(e.type)}))}),[t]),Object(b.jsx)(I.Provider,{value:i,children:e.children})};var P=Object(n.createContext)([[]]),z=function(e){var t=Object(n.useContext)(O),c=Object(n.useContext)(I),a=Object(n.useState)([]),i=Object(u.a)(a,2),r=i[0],o=i[1],d=Object(n.useState)([]),j=Object(u.a)(d,2),l=j[0],m=j[1];return Object(n.useEffect)((function(){o(Object(s.a)(l))}),[l]),Object(n.useEffect)((function(){t.off("highlightCard").on("highlightCard",(function(e,t){return function(e,t,c,n,a,i){if(0!==c.length){var r={id:"unknown",name:"unknown"},o=[];switch(i){case 0:for(var s=0;s<c.length;s++)if(c[s].matchid===e){r={id:c[s].player,name:t[c[s].player].name};break}for(var u=0;u<c.length;u++)o.push({card:c[u].card,matchid:c[u].matchid,player:c[u].player,playerName:t[c[u].player].name,chosen:c[u].player!==r.id,revealed:!0});a([].concat(o));break;case 2:case 3:for(var d=0;d<c.length;d++)for(var j=0;j<c[d].length;j++)if(c[d][j].matchid===e){r={id:c[d][j].player,name:t[c[d][j].player].name};break}for(var l=[],b=0;b<c.length;b++){for(var m=0;m<c[b].length;m++)l.push({card:c[b][m].card,matchid:c[b][m].matchid,player:c[b][m].player,playerName:t[c[b][m].player].name,chosen:c[b][m].player!==r.id,revealed:!0});o.push(l),l=[]}a([].concat(o))}}}(e,t,r,0,m,c)}))}),[r]),Object(n.useEffect)((function(){t.on("playedCards",(function(e,t){return function(e,t,c,n,a,i){if(0!==e.length)switch(t){case 0:a(Object(s.a)(e));break;case 2:case 3:var r=e;!function(e){for(var t=e.length,c=1;c<t;c++){for(var n=e[c],a=c-1;a>-1&&n.player<e[a].player;)e[a+1]=e[a],a--;e[a+1]=n}}(r);for(var o=[r[0]],u=[],d=1;d<r.length;d++)r[d].player===r[d-1].player?o.push(r[d]):(u.push(o),o=[r[d]]);u.push(o),a([].concat(u))}else a([])}(e,t,0,0,m)}))}),[]),Object(b.jsx)(P.Provider,{value:[r,o],children:e.children})},T=function(){var e=Object(n.useContext)(O),t=Object(n.useState)({id:0,text:"Questions will appear here, answer with one (or more) of your cards",type:0}),c=Object(u.a)(t,2),a=c[0],i=c[1];return Object(n.useEffect)((function(){e.on("blackCard",(function(e){i({id:e.id,text:e.text,type:e.type})}))}),[e]),Object(b.jsx)("div",{id:"blackCard",children:Object(b.jsx)("div",{className:"biggerCard blackCard",children:a.text})})},A=function(){var e=Object(n.useContext)(O),t=Object(n.useState)([]),c=Object(u.a)(t,2),a=c[0],i=c[1],r=Object(n.useState)(0),o=Object(u.a)(r,2),d=o[0],j=o[1];return Object(n.useEffect)((function(){i(0!==d?[].concat(Object(s.a)(a),[d]):[])}),[d]),Object(n.useEffect)((function(){e.on("playedCardsHidden",(function(){j((function(e){return e+1}))})),e.on("playedCards",(function(e,t){j(0)})),e.on("highlightCard",(function(e,t){j(0)}))}),[e]),Object(b.jsx)(b.Fragment,{children:a.length>0?a.map((function(e){return Object(b.jsx)("div",{className:"biggerCard hidden"},e)})):Object(b.jsx)(b.Fragment,{})})},M=function(e){var t=e.card,c=(e.player,e.playerName),a=e.chosen,i=e.revealed,r=Object(n.useContext)(O),o=function(e){i||r.emit("tzarPicked",e)};return 0===t.card.type||2===t.card.type?Object(b.jsxs)("div",{className:"biggerCard",onClick:function(){return o(t.matchid)},style:{opacity:a?"1":"0.5"},children:[t.card.text," ",i?"[".concat(c,"]"):""]},t.matchid):1===t.card.type?Object(b.jsx)("div",{className:"biggerCard",onClick:function(){return o(t.matchid)},style:{backgroundImage:"url(".concat(t.card.text,")"),opacity:a?"1":"0.5"},children:i?"[".concat(c,"]"):""},t.matchid):Object(b.jsx)(b.Fragment,{})},_=function(){var e=Object(n.useContext)(P),t=Object(u.a)(e,1)[0],c=Object(n.useContext)(I);return Object(b.jsxs)("div",{id:"cards",children:[Object(b.jsx)(A,{}),0===t.length?Object(b.jsx)(b.Fragment,{}):t.map((function(e){switch(c){case 0:if(!Array.isArray(e))return Object(b.jsx)(M,{card:e,chosen:!e.chosen,revealed:e.revealed||!1,playerName:e.playerName||"",player:e.player||"unknown"},e.matchid);break;case 2:case 3:var t=0;if(Array.isArray(e))return Object(b.jsx)("div",{className:"box",children:e.map((function(e){return Object(b.jsx)(M,{card:e,chosen:!e.chosen,revealed:e.revealed||!1,playerName:e.playerName||"",player:e.player||"unknown"},"".concat(e.matchid).concat(t++))}))},"".concat(t++,"box"))}return Object(b.jsx)(b.Fragment,{})}))]})},D=function(){return Object(b.jsxs)("div",{className:"mainArea",children:[Object(b.jsx)(T,{}),Object(b.jsx)("div",{children:Object(b.jsx)(z,{children:Object(b.jsx)(_,{})})})]})},H=Object(n.createContext)([]),L=function(e){var t=Object(n.useContext)(I),c=Object(n.useContext)(O),a=Object(n.useState)([]),i=Object(u.a)(a,2),r=i[0],o=i[1],d=Object(n.useState)(null),j=Object(u.a)(d,2),l=j[0],m=j[1],h=Object(n.useState)(!1),x=Object(u.a)(h,2),v=x[0],p=x[1],f=Object(n.useState)({canCommit:!0,commitCount:0}),C=Object(u.a)(f,2),y=C[0],g=C[1],k=Object(n.useState)({card:{cardid:-1,matchid:-1},sauce:{id:-1,text:"Example Card",type:0}}),N=Object(u.a)(k,2),w=N[0],S=N[1];return Object(n.useEffect)((function(){-1!==w.card.matchid&&o([].concat(Object(s.a)(r),[w]))}),[w]),Object(n.useEffect)((function(){c.on("recieveWhite",(function(e,t,c){S({card:t,sauce:c})})),c.on("loadloader",(function(e){p(!0),m(null)})),c.on("unloadloader",(function(e){p(!1)})),c.on("tzarTurn",(function(){m("You are the tzar, pick a card"),g({canCommit:!1,commitCount:y.commitCount})})),c.on("playerWait",(function(){m("Tzar is picking a card"),g({canCommit:!1,commitCount:y.commitCount})})),c.on("blockTzar",(function(e){m("You are the tzar"),g({canCommit:!1,commitCount:y.commitCount})})),c.on("enableCards",(function(){m(null),g({canCommit:!0,commitCount:0})})),c.on("clearBoard",(function(){o([])})),c.on("startDisable",(function(e){g({canCommit:!0,commitCount:0})}))}),[c]),Object(b.jsx)(H.Provider,{value:[r,o,v,l,function(e,n){var a=Object(s.a)(r);if(0!==a.length&&y.canCommit){switch(t){case 0:y.commitCount>=0?g({canCommit:!1,commitCount:y.commitCount}):g({canCommit:y.canCommit,commitCount:y.commitCount+1});break;case 2:y.commitCount>=1?g({canCommit:!1,commitCount:y.commitCount}):g({canCommit:y.canCommit,commitCount:y.commitCount+1});break;case 3:y.commitCount>=2?g({canCommit:!1,commitCount:y.commitCount}):g({canCommit:y.canCommit,commitCount:y.commitCount+1})}for(var i=0;i<a.length;i++)void 0!==a[i].card?e===a[i].card.matchid&&a.splice(i,1):a.splice(i,1);o(Object(s.a)(a)),c.emit("cardCommited",e,n)}}],children:e.children})},W=function(){return Object(b.jsx)("div",{className:"loaderWrapper",children:Object(b.jsxs)("div",{className:"wrapper",children:[Object(b.jsx)("div",{className:"dot dot1"}),Object(b.jsx)("div",{className:"dot dot2"}),Object(b.jsx)("div",{className:"dot dot3"}),Object(b.jsx)("div",{className:"dot dot4"}),Object(b.jsx)("div",{className:"dot dot5"}),Object(b.jsx)("div",{className:"dot dot6"}),Object(b.jsx)("div",{className:"dot dot7"}),Object(b.jsx)("div",{className:"dot dot8"}),Object(b.jsx)("div",{className:"dot dot9"}),Object(b.jsx)("div",{className:"dot dot10"}),Object(b.jsx)("div",{className:"dot dot11"})]})})},J={hidden:{x:100,opacity:0},visible:{x:0,opacity:1}},R=function(e){var t=e.card,c=e.commitFunction,a=Object(n.useContext)(N),i=Object(u.a)(a,1)[0];return void 0===t||void 0===t.sauce||void 0===t.card?Object(b.jsx)(b.Fragment,{}):Object(b.jsx)(x.a.div,{drag:!!i,layout:!0,className:"card",variants:J,whileHover:{scale:1.1},onClick:function(){return c(t.card.matchid,t.sauce.id)},style:{backgroundImage:1===t.sauce.type?"url(".concat(t.sauce.text,")"):""},children:0===t.sauce.type||2===t.sauce.type?"".concat(t.sauce.text," [").concat(t.card.matchid,"]"):""})},Y=function(e){var t=e.message;return Object(b.jsx)("div",{id:"blocker",children:Object(b.jsx)("h2",{children:t})})},Q={transition:{ease:"easeIn",duration:1}},V=function(){var e=Object(n.useContext)(H),t=Object(u.a)(e,5),c=t[0],a=t[2],i=t[3],r=t[4];return Object(b.jsxs)(x.a.div,{layout:!0,id:"yourCards",initial:"hidden",animate:"visible",variants:Q,children:[a&&Object(b.jsx)(W,{}),null!==i&&Object(b.jsx)(Y,{message:i}),null===c||void 0===c?void 0:c.map((function(e){var t;return Object(b.jsx)(R,{card:e,commitFunction:r},(null===e||void 0===e||null===(t=e.card)||void 0===t?void 0:t.matchid)||"temp")}))]})},q="unknown",G=function(){var e=Object(n.useContext)(O);return window.onload=function(){e.emit("new player"),q=prompt("Please enter your nickname","")||"unknown",e.emit("updateName",q)},window.onbeforeunload=function(){var t=new Date,c={date:"["+String(t.getHours()).padStart(2,"0")+":"+String(t.getMinutes()).padStart(2,"0")+":"+String(t.getSeconds()).padStart(2,"0")+"]",author:q,sauce:"leaves the game"};return e.emit("message",c),e.emit("leaverTrigger"),null},Object(b.jsx)("div",{id:"wrapper",children:Object(b.jsxs)(w,{children:[Object(b.jsx)(F,{}),Object(b.jsxs)(B,{children:[Object(b.jsx)(D,{}),Object(b.jsx)(L,{children:Object(b.jsx)(V,{})})]})]})})},K=function(){return void 0!==typeof window&&(window.location="/"),null};c(111);var U=function(){return Object(b.jsx)(h,{children:Object(b.jsx)(r.a,{children:Object(b.jsxs)(o.c,{children:[Object(b.jsx)(o.a,{exact:!0,path:"/",component:G}),Object(b.jsx)(o.a,{component:K})]})})})};i.a.render(Object(b.jsx)(n.StrictMode,{children:Object(b.jsx)(U,{})}),document.getElementById("root"))}},[[156,1,2]]]);
//# sourceMappingURL=main.57246e8f.chunk.js.map