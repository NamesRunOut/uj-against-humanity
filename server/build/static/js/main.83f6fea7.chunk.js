(this["webpackJsonpuj-against-humanity"]=this["webpackJsonpuj-against-humanity"]||[]).push([[0],{111:function(t,e,n){},156:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n(113),i=n.n(a),r=n(64),o=n(8),s=n(22),d=n(4),u=n(159),j=n(114),l=n.n(j),b=n(2),O=l()(),m=Object(c.createContext)(),h=function(t){var e=Object(c.useState)(O),n=Object(d.a)(e,1)[0];return Object(b.jsx)(m.Provider,{value:n,children:t.children})},x=n(158),v=function(t){var e=t.players;return Object(b.jsx)(x.a.div,{id:"scoreboard",children:0===e.length?Object(b.jsx)(b.Fragment,{}):e.map((function(t){return Object(b.jsxs)(x.a.span,{children:[Object(b.jsx)(x.a.div,{className:"playerScore",children:Object(b.jsxs)(x.a.div,{children:[t.name," ",t.status,Object(b.jsx)("br",{}),"Points: ",t.points,Object(b.jsxs)(x.a.span,{style:{opacity:"0.2",marginLeft:"0.25em"},children:["[",t.id,"]"]})]})}),Object(b.jsx)("hr",{})]},"".concat(t.id,"1"))}))})},f=function(t){var e=t.chat,n=t.writeMessage;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(x.a.div,{children:Object(b.jsx)(x.a.div,{id:"chatLog",children:e.map((function(t){return Object(b.jsxs)("p",{children:[t.date," ",t.author,": ",t.sauce]})}))})}),Object(b.jsxs)(x.a.div,{className:"info_chat_input",children:[Object(b.jsx)("input",{id:"chatInput",placeholder:"Chat","aria-label":"Chat"}),Object(b.jsx)("button",{type:"button",onClick:n,children:"Send"})]})]})},p=function(){var t=Object(c.useContext)(m),e=Object(c.useState)(!0),n=Object(d.a)(e,2),a=n[0],i=n[1];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("button",{type:"button",onClick:function(){t.emit("reroll")},children:"Reroll cards"}),Object(b.jsx)("button",{type:"button",onClick:function(){a&&(i(!1),t.emit("skipBlack"),setTimeout((function(){i(!0)}),3e4))},id:"skipButton",children:"Skip black"})]})},C=n(160),g=function(t){var e=t.close,n=t.players,c=t.chat,a=t.writeMessage;return Object(b.jsx)(C.a,{children:Object(b.jsxs)(x.a.div,{initial:{opacity:0,x:-200},animate:{opacity:1,x:0},exit:{opacity:0,x:-200},transition:{duration:.2,delay:0},style:{pointerEvents:"auto"},className:"overlay",layout:!0,children:[Object(b.jsx)(p,{}),Object(b.jsxs)(x.a.div,{className:"info_score",children:[Object(b.jsxs)(x.a.div,{className:"title",children:["Scoreboard",Object(b.jsx)("hr",{})]}),Object(b.jsx)(v,{players:n})]}),Object(b.jsx)(x.a.div,{className:"info_chat",children:Object(b.jsx)(f,{chat:c,writeMessage:a})}),Object(b.jsx)(x.a.button,{onClick:function(){return e()},children:"Close"})]})})},y=function(t){var e=t.response,n=Object(c.useContext)(m);return Object(b.jsx)("button",{type:"button",id:"startButton",onClick:function(){n.emit("start")},disabled:e,children:"START"})},k=function(t){var e=t.response,n=Object(c.useContext)(m);return Object(b.jsxs)("div",{className:"navbar_points",children:["Score limit:",Object(b.jsxs)("select",{id:"pointsInput",defaultValue:"5",children:[Object(b.jsx)("option",{value:"1",children:"1"}),Object(b.jsx)("option",{value:"2",children:"2"}),Object(b.jsx)("option",{value:"3",children:"3"}),Object(b.jsx)("option",{value:"4",children:"4"}),Object(b.jsx)("option",{value:"5",children:"5"}),Object(b.jsx)("option",{value:"6",children:"6"}),Object(b.jsx)("option",{value:"7",children:"7"}),Object(b.jsx)("option",{value:"8",children:"8"}),Object(b.jsx)("option",{value:"9",children:"9"}),Object(b.jsx)("option",{value:"10",children:"10"})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"button",id:"pointsButton",onClick:function(){var t,e=(null===(t=document.getElementById("pointsInput"))||void 0===t?void 0:t.value)||5;e&&n.emit("setPoints",e)},disabled:e,children:"Select"})})]})},N=Object(c.createContext)([!1,void 0]),S=function(t){var e=Object(c.useState)(!1),n=Object(d.a)(e,2),a=n[0],i=n[1];return Object(b.jsx)(N.Provider,{value:[a,i],children:t.children})},w=function(){var t=Object(c.useContext)(N),e=Object(d.a)(t,2),n=e[0],a=e[1];return Object(b.jsx)("div",{className:"navbar_decks",children:Object(b.jsxs)("button",{onClick:function(){return a((function(t){return!t}))},children:["Drag cards ",n?"ON":"OFF"]})})},E=function(){var t=document.getElementById("chatLog");null!==t&&(t.scrollTop=t.scrollHeight)},F=function(){var t=Object(c.useContext)(m),e=Object(c.useState)(!1),n=Object(d.a)(e,2),a=n[0],i=n[1],r=Object(c.useState)(!1),o=Object(d.a)(r,2),j=o[0],l=o[1],O=Object(c.useState)([]),h=Object(d.a)(O,2),x=h[0],v=h[1],f=Object(c.useState)([]),p=Object(d.a)(f,2),C=p[0],N=p[1],S="not";function F(t){13===t.keyCode&&B()}var B=function(){var e;null!==(e=document.getElementById("chatInput"))&&(t.emit("message",e.value),e.value=""),E()};return Object(c.useEffect)((function(){document.addEventListener("keydown",F),t.on("message",(function(t){N((function(e){return[].concat(Object(s.a)(e),[t])})),E()})),t.on("recieveWhite",(function(t,e,n){N((function(t){return[].concat(Object(s.a)(t),[{date:"",author:"white card",sauce:"["+e.matchid+"] "+n.text}])})),E()})),t.on("sessionid",(function(t){S=t})),t.on("state",(function(t,e){var n=[];for(var c in t){var a=e[t[c]],i=a.name;a.id===S&&(i+=" (you)");var r="";a.tzar?r="tzar":a.played||(r="playing..."),n.push({name:i,status:r,points:a.points,id:t[c]})}v([].concat(n))})),t.on("startEnable",(function(t){i(!1)})),t.on("startDisable",(function(t){i(!0)}))}),[t]),Object(b.jsxs)("div",{className:"navbar",id:"player",children:[Object(b.jsx)(y,{response:a}),Object(b.jsx)(k,{response:a}),Object(b.jsx)(w,{}),Object(b.jsx)(u.a,{type:"crossfade",children:j&&Object(b.jsx)(g,{close:function(){return l(!1)},players:x,chat:C,writeMessage:B})}),Object(b.jsx)("button",{onClick:function(){return l((function(t){return!t}))},children:"Open info"})]})},B=Object(c.createContext)([[]]),I=function(t){var e=Object(c.useContext)(m),n=Object(c.useState)([]),a=Object(d.a)(n,2),i=a[0],r=a[1],o=Object(c.useState)([]),u=Object(d.a)(o,2),j=u[0],l=u[1];return Object(c.useEffect)((function(){r(Object(s.a)(j))}),[j]),Object(c.useEffect)((function(){e.off("highlightCard").on("highlightCard",(function(t,e){return function(t,e,n,c){if(0!==n.length){for(var a={id:"unknown",name:"unknown"},i=[],r=0;r<n.length;r++)if(n[r].matchid===t){a={id:n[r].player,name:e[n[r].player].name};break}for(var o=0;o<n.length;o++)i.push({card:n[o].card,matchid:n[o].matchid,player:n[o].player,playerName:e[n[o].player].name,chosen:n[o].player!==a.id,revealed:!0});c([].concat(i))}}(t,e,i,l)}))}),[i]),Object(c.useEffect)((function(){e.on("playedCards",(function(t,e){return function(t,e){0!==t.length?e(Object(s.a)(t)):e([])}(t,l)}))}),[]),Object(b.jsx)(B.Provider,{value:[i,r],children:t.children})},z=function(){var t=Object(c.useContext)(m),e=Object(c.useState)({id:0,text:"Questions will appear here, answer with one (or more) of your cards"}),n=Object(d.a)(e,2),a=n[0],i=n[1];return Object(c.useEffect)((function(){t.on("blackCard",(function(t){i({id:t.id,text:t.text})}))}),[t]),Object(b.jsx)("div",{id:"blackCard",children:Object(b.jsx)("div",{className:"biggerCard blackCard",children:a.text})})},P=function(){var t=Object(c.useContext)(m),e=Object(c.useState)([]),n=Object(d.a)(e,2),a=n[0],i=n[1],r=Object(c.useState)(0),o=Object(d.a)(r,2),u=o[0],j=o[1];return Object(c.useEffect)((function(){i(0!==u?[].concat(Object(s.a)(a),[u]):[])}),[u]),Object(c.useEffect)((function(){t.on("playedCardsHidden",(function(){j((function(t){return t+1}))})),t.on("playedCards",(function(t,e){j(0)})),t.on("highlightCard",(function(t,e){j(0)}))}),[t]),Object(b.jsx)(b.Fragment,{children:a.length>0?a.map((function(t){return Object(b.jsx)("div",{className:"biggerCard hidden"},t)})):Object(b.jsx)(b.Fragment,{})})},T=function(t){var e=t.card,n=t.playerName,a=t.chosen,i=t.revealed,r=Object(c.useContext)(m);return Object(b.jsxs)("div",{className:"biggerCard",onClick:function(){return t=e.matchid,void(i||r.emit("tzarPicked",t));var t},style:{opacity:a?"1":"0.5"},children:[e.card.text," ",i?"[".concat(n,"]"):""]},e.matchid)},M=function(){var t=Object(c.useContext)(B),e=Object(d.a)(t,1)[0];return Object(b.jsxs)("div",{id:"cards",children:[Object(b.jsx)(P,{}),0===e.length?Object(b.jsx)(b.Fragment,{}):e.map((function(t){if(!Array.isArray(t))return Object(b.jsx)(T,{card:t,chosen:!t.chosen,revealed:t.revealed||!1,playerName:t.playerName||""},t.matchid)}))]})},_=function(){return Object(b.jsxs)("div",{className:"mainArea",children:[Object(b.jsx)(z,{}),Object(b.jsx)("div",{children:Object(b.jsx)(I,{children:Object(b.jsx)(M,{})})})]})},A=Object(c.createContext)([]),D=function(t){var e=Object(c.useContext)(m),n=Object(c.useState)([]),a=Object(d.a)(n,2),i=a[0],r=a[1],o=Object(c.useState)(null),u=Object(d.a)(o,2),j=u[0],l=u[1],O=Object(c.useState)(!1),h=Object(d.a)(O,2),x=h[0],v=h[1],f=Object(c.useState)({canCommit:!0,commitCount:0}),p=Object(d.a)(f,2),C=p[0],g=p[1],y=Object(c.useState)({card:{cardid:-1,matchid:-1},sauce:{id:-1,text:"Example Card"}}),k=Object(d.a)(y,2),N=k[0],S=k[1];return Object(c.useEffect)((function(){-1!==N.card.matchid&&r([].concat(Object(s.a)(i),[N]))}),[N]),Object(c.useEffect)((function(){e.on("recieveWhite",(function(t,e,n){S({card:e,sauce:n})})),e.on("loadloader",(function(t){v(!0),l(null)})),e.on("unloadloader",(function(t){v(!1)})),e.on("tzarTurn",(function(){l("You are the tzar, pick a card"),g({canCommit:!1,commitCount:C.commitCount})})),e.on("playerWait",(function(){l("Tzar is picking a card"),g({canCommit:!1,commitCount:C.commitCount})})),e.on("blockTzar",(function(t){l("You are the tzar"),g({canCommit:!1,commitCount:C.commitCount})})),e.on("enableCards",(function(){l(null),g({canCommit:!0,commitCount:0})})),e.on("clearBoard",(function(){r([])})),e.on("startDisable",(function(t){g({canCommit:!0,commitCount:0})}))}),[e]),Object(b.jsx)(A.Provider,{value:[i,r,x,j,function(t,n){var c=Object(s.a)(i);if(0!==c.length&&C.canCommit){C.commitCount>=0?g({canCommit:!1,commitCount:C.commitCount}):g({canCommit:C.canCommit,commitCount:C.commitCount+1});for(var a=0;a<c.length;a++)void 0!==c[a].card?t===c[a].card.matchid&&c.splice(a,1):c.splice(a,1);r(Object(s.a)(c)),e.emit("cardCommited",t,n)}}],children:t.children})},H=function(){return Object(b.jsx)("div",{className:"loaderWrapper",children:Object(b.jsxs)("div",{className:"wrapper",children:[Object(b.jsx)("div",{className:"dot dot1"}),Object(b.jsx)("div",{className:"dot dot2"}),Object(b.jsx)("div",{className:"dot dot3"}),Object(b.jsx)("div",{className:"dot dot4"}),Object(b.jsx)("div",{className:"dot dot5"}),Object(b.jsx)("div",{className:"dot dot6"}),Object(b.jsx)("div",{className:"dot dot7"}),Object(b.jsx)("div",{className:"dot dot8"}),Object(b.jsx)("div",{className:"dot dot9"}),Object(b.jsx)("div",{className:"dot dot10"}),Object(b.jsx)("div",{className:"dot dot11"})]})})},L={hidden:{x:100,opacity:0},visible:{x:0,opacity:1}},W=function(t){var e=t.card,n=t.commitFunction,a=Object(c.useContext)(N),i=Object(d.a)(a,1)[0];return void 0===e||void 0===e.sauce||void 0===e.card?Object(b.jsx)(b.Fragment,{}):Object(b.jsxs)(x.a.div,{drag:!!i,layout:!0,className:"card",variants:L,whileHover:{scale:1.1},onClick:function(){return n(e.card.matchid,e.sauce.id)},children:[e.sauce.text," [",e.card.matchid,"]"]})},J=function(t){var e=t.message;return Object(b.jsx)("div",{id:"blocker",children:Object(b.jsx)("h2",{children:e})})},R={transition:{ease:"easeIn",duration:1}},Y=function(){var t=Object(c.useContext)(A),e=Object(d.a)(t,5),n=e[0],a=e[2],i=e[3],r=e[4];return Object(b.jsxs)(x.a.div,{layout:!0,id:"yourCards",initial:"hidden",animate:"visible",variants:R,children:[a&&Object(b.jsx)(H,{}),null!==i&&Object(b.jsx)(J,{message:i}),null===n||void 0===n?void 0:n.map((function(t){var e;return Object(b.jsx)(W,{card:t,commitFunction:r},(null===t||void 0===t||null===(e=t.card)||void 0===e?void 0:e.matchid)||"temp")}))]})},Q="unknown",V=function(){var t=Object(c.useContext)(m);return window.onload=function(){t.emit("new player"),Q=prompt("Please enter your nickname","")||"unknown",t.emit("updateName",Q)},window.onbeforeunload=function(){var e=new Date,n={date:"["+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart(2,"0")+"]",author:Q,sauce:"leaves the game"};return t.emit("message",n),t.emit("leaverTrigger"),null},Object(b.jsx)("div",{id:"wrapper",children:Object(b.jsxs)(S,{children:[Object(b.jsx)(F,{}),Object(b.jsx)(_,{}),Object(b.jsx)(D,{children:Object(b.jsx)(Y,{})})]})})},q=function(){return void 0!==typeof window&&(window.location="/"),null};n(111);var G=function(){return Object(b.jsx)(h,{children:Object(b.jsx)(r.a,{children:Object(b.jsxs)(o.c,{children:[Object(b.jsx)(o.a,{exact:!0,path:"/",component:V}),Object(b.jsx)(o.a,{component:q})]})})})};i.a.render(Object(b.jsx)(c.StrictMode,{children:Object(b.jsx)(G,{})}),document.getElementById("root"))}},[[156,1,2]]]);
//# sourceMappingURL=main.83f6fea7.chunk.js.map