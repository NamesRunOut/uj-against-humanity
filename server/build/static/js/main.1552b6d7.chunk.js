(this["webpackJsonpuj-against-humanity"]=this["webpackJsonpuj-against-humanity"]||[]).push([[0],{111:function(t,e,c){},156:function(t,e,c){"use strict";c.r(e);var n=c(0),a=c(113),i=c.n(a),r=c(64),o=c(8),s=c(22),u=c(4),d=c(159),j=c(114),l=c.n(j),b=c(2),m=l()(),O=Object(n.createContext)(),h=function(t){var e=Object(n.useState)(m),c=Object(u.a)(e,1)[0];return Object(b.jsx)(O.Provider,{value:c,children:t.children})},x=c(158),v=function(t){var e=t.players;return Object(b.jsx)(x.a.div,{id:"scoreboard",children:0===e.length?Object(b.jsx)(b.Fragment,{}):e.map((function(t){return Object(b.jsxs)(x.a.span,{children:[Object(b.jsx)(x.a.div,{className:"playerScore",children:Object(b.jsxs)(x.a.div,{children:[t.name," ",t.status,Object(b.jsx)("br",{}),"Points: ",t.points,Object(b.jsxs)(x.a.span,{style:{opacity:"0.2",marginLeft:"0.25em"},children:["[",t.id,"]"]})]})}),Object(b.jsx)("hr",{})]},"".concat(t.id,"1"))}))})},f=function(t){var e=t.chat,c=t.writeMessage;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(x.a.div,{children:Object(b.jsx)(x.a.div,{id:"chatLog",children:e.map((function(t){return Object(b.jsxs)("p",{children:[t.date," ",t.author,": ",t.sauce]})}))})}),Object(b.jsxs)(x.a.div,{className:"info_chat_input",children:[Object(b.jsx)("input",{id:"chatInput",placeholder:"Chat","aria-label":"Chat"}),Object(b.jsx)("button",{type:"button",onClick:c,children:"Send"})]})]})},p=function(){var t=Object(n.useContext)(O),e=Object(n.useState)(!0),c=Object(u.a)(e,2),a=c[0],i=c[1];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("button",{type:"button",onClick:function(){t.emit("reroll")},children:"Reroll cards"}),Object(b.jsx)("button",{type:"button",onClick:function(){a&&(i(!1),t.emit("skipBlack"),setTimeout((function(){i(!0)}),3e4))},id:"skipButton",children:"Skip black"})]})},C=c(160),y=function(t){var e=t.close,c=t.players,n=t.chat,a=t.writeMessage;return Object(b.jsx)(C.a,{children:Object(b.jsxs)(x.a.div,{initial:{opacity:0,x:-200},animate:{opacity:1,x:0},exit:{opacity:0,x:-200},transition:{duration:.2,delay:0},style:{pointerEvents:"auto"},className:"overlay",layout:!0,children:[Object(b.jsx)(p,{}),Object(b.jsxs)(x.a.div,{className:"info_score",children:[Object(b.jsxs)(x.a.div,{className:"title",children:["Scoreboard",Object(b.jsx)("hr",{})]}),Object(b.jsx)(v,{players:c})]}),Object(b.jsx)(x.a.div,{className:"info_chat",children:Object(b.jsx)(f,{chat:n,writeMessage:a})}),Object(b.jsx)(x.a.button,{onClick:function(){return e()},children:"Close"})]})})},g=function(t){var e=t.response,c=Object(n.useContext)(O);return Object(b.jsx)("button",{type:"button",id:"startButton",onClick:function(){c.emit("start")},disabled:e,children:"START"})},k=function(t){var e=t.response,c=Object(n.useContext)(O);return Object(b.jsxs)("div",{className:"navbar_points",children:["Score limit:",Object(b.jsxs)("select",{id:"pointsInput",defaultValue:"5",children:[Object(b.jsx)("option",{value:"1",children:"1"}),Object(b.jsx)("option",{value:"2",children:"2"}),Object(b.jsx)("option",{value:"3",children:"3"}),Object(b.jsx)("option",{value:"4",children:"4"}),Object(b.jsx)("option",{value:"5",children:"5"}),Object(b.jsx)("option",{value:"6",children:"6"}),Object(b.jsx)("option",{value:"7",children:"7"}),Object(b.jsx)("option",{value:"8",children:"8"}),Object(b.jsx)("option",{value:"9",children:"9"}),Object(b.jsx)("option",{value:"10",children:"10"})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"button",id:"pointsButton",onClick:function(){var t,e=(null===(t=document.getElementById("pointsInput"))||void 0===t?void 0:t.value)||5;e&&c.emit("setPoints",e)},disabled:e,children:"Select"})})]})},N=Object(n.createContext)([!1,void 0]),S=function(t){var e=Object(n.useState)(!1),c=Object(u.a)(e,2),a=c[0],i=c[1];return Object(b.jsx)(N.Provider,{value:[a,i],children:t.children})},w=function(){var t=Object(n.useContext)(N),e=Object(u.a)(t,2),c=e[0],a=e[1];return Object(b.jsx)("div",{className:"navbar_decks",children:Object(b.jsxs)("button",{onClick:function(){return a((function(t){return!t}))},children:["Drag cards ",c?"ON":"OFF"]})})},E=function(){var t=document.getElementById("chatLog");null!==t&&(t.scrollTop=t.scrollHeight)},F=function(){var t=Object(n.useContext)(O),e=Object(n.useState)(!1),c=Object(u.a)(e,2),a=c[0],i=c[1],r=Object(n.useState)(!1),o=Object(u.a)(r,2),j=o[0],l=o[1],m=Object(n.useState)([]),h=Object(u.a)(m,2),x=h[0],v=h[1],f=Object(n.useState)([]),p=Object(u.a)(f,2),C=p[0],N=p[1],S="not";function F(t){13===t.keyCode&&B()}var B=function(){var e;null!==(e=document.getElementById("chatInput"))&&(t.emit("message",e.value),e.value=""),E()};return Object(n.useEffect)((function(){document.addEventListener("keydown",F),t.on("message",(function(t){N((function(e){return[].concat(Object(s.a)(e),[t])})),E()})),t.on("recieveWhite",(function(t,e,c){N((function(t){return[].concat(Object(s.a)(t),[{date:"",author:"white card",sauce:"["+e.matchid+"] "+c.text}])})),E()})),t.on("sessionid",(function(t){S=t})),t.on("state",(function(t,e){var c=[];for(var n in t){var a=e[t[n]],i=a.name;a.id===S&&(i+=" (you)");var r="";a.tzar?r="tzar":a.played||(r="playing..."),c.push({name:i,status:r,points:a.points,id:t[n]})}v([].concat(c))})),t.on("startEnable",(function(t){i(!1)})),t.on("startDisable",(function(t){i(!0)}))}),[t]),Object(b.jsxs)("div",{className:"navbar",id:"player",children:[Object(b.jsx)(g,{response:a}),Object(b.jsx)(k,{response:a}),Object(b.jsx)(w,{}),Object(b.jsx)(d.a,{type:"crossfade",children:j&&Object(b.jsx)(y,{close:function(){return l(!1)},players:x,chat:C,writeMessage:B})}),Object(b.jsx)("button",{onClick:function(){return l((function(t){return!t}))},children:"Open info"})]})},B=Object(n.createContext)(0),I=function(t){var e=Object(n.useContext)(O),c=Object(n.useState)(0),a=Object(u.a)(c,2),i=a[0],r=a[1];return Object(n.useEffect)((function(){e.on("blackCard",(function(t){r(t.type)}))}),[e]),Object(b.jsx)(B.Provider,{value:i,children:t.children})};var P=Object(n.createContext)([[]]),z=function(t){var e=Object(n.useContext)(O),c=Object(n.useContext)(B),a=Object(n.useState)([]),i=Object(u.a)(a,2),r=i[0],o=i[1],d=Object(n.useState)([]),j=Object(u.a)(d,2),l=j[0],m=j[1];return Object(n.useEffect)((function(){o(Object(s.a)(l))}),[l]),Object(n.useEffect)((function(){e.off("highlightCard").on("highlightCard",(function(t,e){return function(t,e,c,n,a,i){if(0!==c.length){var r={id:"unknown",name:"unknown"},o=[];switch(i){case 0:for(var s=0;s<c.length;s++)if(c[s].matchid===t){r={id:c[s].player,name:e[c[s].player].name};break}for(var u=0;u<c.length;u++)o.push({card:c[u].card,matchid:c[u].matchid,player:c[u].player,playerName:e[c[u].player].name,chosen:c[u].player!==r.id,revealed:!0});a([].concat(o));break;case 2:case 3:for(var d=0;d<c.length;d++)for(var j=0;j<c[d].length;j++)if(c[d][j].matchid===t){r={id:c[d][j].player,name:e[c[d][j].player].name};break}for(var l=[],b=0;b<c.length;b++){for(var m=0;m<c[b].length;m++)l.push({card:c[b][m].card,matchid:c[b][m].matchid,player:c[b][m].player,playerName:e[c[b][m].player].name,chosen:c[b][m].player!==r.id,revealed:!0});o.push(l),l=[]}a([].concat(o))}}}(t,e,r,0,m,c)}))}),[r]),Object(n.useEffect)((function(){e.on("playedCards",(function(t,e){return function(t,e,c,n,a){if(0!==t.length)switch(e){case 0:a(Object(s.a)(t));break;case 2:case 3:var i=t;!function(t){for(var e=t.length,c=1;c<e;c++){for(var n=t[c],a=c-1;a>-1&&n.player<t[a].player;)t[a+1]=t[a],a--;t[a+1]=n}}(i);for(var r=[i[0]],o=[],u=1;u<i.length;u++)i[u].player===i[u-1].player?r.push(i[u]):(o.push(r),r=[i[u]]);o.push(r),a([].concat(o))}else a([])}(t,e,0,0,m)}))}),[]),Object(b.jsx)(P.Provider,{value:[r,o],children:t.children})},T=function(){var t=Object(n.useContext)(O),e=Object(n.useState)({id:0,text:"Questions will appear here, answer with one (or more) of your cards"}),c=Object(u.a)(e,2),a=c[0],i=c[1];return Object(n.useEffect)((function(){t.on("blackCard",(function(t){i({id:t.id,text:t.text})}))}),[t]),Object(b.jsx)("div",{id:"blackCard",children:Object(b.jsx)("div",{className:"biggerCard blackCard",children:a.text})})},M=function(){var t=Object(n.useContext)(O),e=Object(n.useState)([]),c=Object(u.a)(e,2),a=c[0],i=c[1],r=Object(n.useState)(0),o=Object(u.a)(r,2),d=o[0],j=o[1];return Object(n.useEffect)((function(){i(0!==d?[].concat(Object(s.a)(a),[d]):[])}),[d]),Object(n.useEffect)((function(){t.on("playedCardsHidden",(function(){j((function(t){return t+1}))})),t.on("playedCards",(function(t,e){j(0)})),t.on("highlightCard",(function(t,e){j(0)}))}),[t]),Object(b.jsx)(b.Fragment,{children:a.length>0?a.map((function(t){return Object(b.jsx)("div",{className:"biggerCard hidden"},t)})):Object(b.jsx)(b.Fragment,{})})},_=function(t){var e=t.card,c=t.playerName,a=t.chosen,i=t.revealed,r=Object(n.useContext)(O);return Object(b.jsxs)("div",{className:"biggerCard",onClick:function(){return t=e.matchid,void(i||r.emit("tzarPicked",t));var t},style:{opacity:a?"1":"0.5"},children:[e.card.text," ",i?"[".concat(c,"]"):""]},e.matchid)},A=function(){var t=Object(n.useContext)(P),e=Object(u.a)(t,1)[0];return Object(b.jsxs)("div",{id:"cards",children:[Object(b.jsx)(M,{}),0===e.length?Object(b.jsx)(b.Fragment,{}):e.map((function(t){if(!Array.isArray(t))return Object(b.jsx)(_,{card:t,chosen:!t.chosen,revealed:t.revealed||!1,playerName:t.playerName||""},t.matchid)}))]})},D=function(){return Object(b.jsxs)("div",{className:"mainArea",children:[Object(b.jsx)(T,{}),Object(b.jsx)("div",{children:Object(b.jsx)(z,{children:Object(b.jsx)(A,{})})})]})},H=Object(n.createContext)([]),L=function(t){var e=Object(n.useContext)(B),c=Object(n.useContext)(O),a=Object(n.useState)([]),i=Object(u.a)(a,2),r=i[0],o=i[1],d=Object(n.useState)(null),j=Object(u.a)(d,2),l=j[0],m=j[1],h=Object(n.useState)(!1),x=Object(u.a)(h,2),v=x[0],f=x[1],p=Object(n.useState)({canCommit:!0,commitCount:0}),C=Object(u.a)(p,2),y=C[0],g=C[1],k=Object(n.useState)({card:{cardid:-1,matchid:-1},sauce:{id:-1,text:"Example Card"}}),N=Object(u.a)(k,2),S=N[0],w=N[1];return Object(n.useEffect)((function(){-1!==S.card.matchid&&o([].concat(Object(s.a)(r),[S]))}),[S]),Object(n.useEffect)((function(){c.on("recieveWhite",(function(t,e,c){w({card:e,sauce:c})})),c.on("loadloader",(function(t){f(!0),m(null)})),c.on("unloadloader",(function(t){f(!1)})),c.on("tzarTurn",(function(){m("You are the tzar, pick a card"),g({canCommit:!1,commitCount:y.commitCount})})),c.on("playerWait",(function(){m("Tzar is picking a card"),g({canCommit:!1,commitCount:y.commitCount})})),c.on("blockTzar",(function(t){m("You are the tzar"),g({canCommit:!1,commitCount:y.commitCount})})),c.on("enableCards",(function(){m(null),g({canCommit:!0,commitCount:0})})),c.on("clearBoard",(function(){o([])})),c.on("startDisable",(function(t){g({canCommit:!0,commitCount:0})}))}),[c]),Object(b.jsx)(H.Provider,{value:[r,o,v,l,function(t,n){var a=Object(s.a)(r);if(0!==a.length&&y.canCommit){switch(e){case 0:y.commitCount>=0?g({canCommit:!1,commitCount:y.commitCount}):g({canCommit:y.canCommit,commitCount:y.commitCount+1});break;case 2:y.commitCount>=1?g({canCommit:!1,commitCount:y.commitCount}):g({canCommit:y.canCommit,commitCount:y.commitCount+1});break;case 3:y.commitCount>=2?g({canCommit:!1,commitCount:y.commitCount}):g({canCommit:y.canCommit,commitCount:y.commitCount+1})}for(var i=0;i<a.length;i++)void 0!==a[i].card?t===a[i].card.matchid&&a.splice(i,1):a.splice(i,1);o(Object(s.a)(a)),c.emit("cardCommited",t,n)}}],children:t.children})},W=function(){return Object(b.jsx)("div",{className:"loaderWrapper",children:Object(b.jsxs)("div",{className:"wrapper",children:[Object(b.jsx)("div",{className:"dot dot1"}),Object(b.jsx)("div",{className:"dot dot2"}),Object(b.jsx)("div",{className:"dot dot3"}),Object(b.jsx)("div",{className:"dot dot4"}),Object(b.jsx)("div",{className:"dot dot5"}),Object(b.jsx)("div",{className:"dot dot6"}),Object(b.jsx)("div",{className:"dot dot7"}),Object(b.jsx)("div",{className:"dot dot8"}),Object(b.jsx)("div",{className:"dot dot9"}),Object(b.jsx)("div",{className:"dot dot10"}),Object(b.jsx)("div",{className:"dot dot11"})]})})},J={hidden:{x:100,opacity:0},visible:{x:0,opacity:1}},R=function(t){var e=t.card,c=t.commitFunction,a=Object(n.useContext)(N),i=Object(u.a)(a,1)[0];return void 0===e||void 0===e.sauce||void 0===e.card?Object(b.jsx)(b.Fragment,{}):Object(b.jsxs)(x.a.div,{drag:!!i,layout:!0,className:"card",variants:J,whileHover:{scale:1.1},onClick:function(){return c(e.card.matchid,e.sauce.id)},children:[e.sauce.text," [",e.card.matchid,"]"]})},Y=function(t){var e=t.message;return Object(b.jsx)("div",{id:"blocker",children:Object(b.jsx)("h2",{children:e})})},Q={transition:{ease:"easeIn",duration:1}},V=function(){var t=Object(n.useContext)(H),e=Object(u.a)(t,5),c=e[0],a=e[2],i=e[3],r=e[4];return Object(b.jsxs)(x.a.div,{layout:!0,id:"yourCards",initial:"hidden",animate:"visible",variants:Q,children:[a&&Object(b.jsx)(W,{}),null!==i&&Object(b.jsx)(Y,{message:i}),null===c||void 0===c?void 0:c.map((function(t){var e;return Object(b.jsx)(R,{card:t,commitFunction:r},(null===t||void 0===t||null===(e=t.card)||void 0===e?void 0:e.matchid)||"temp")}))]})},q="unknown",G=function(){var t=Object(n.useContext)(O);return window.onload=function(){t.emit("new player"),q=prompt("Please enter your nickname","")||"unknown",t.emit("updateName",q)},window.onbeforeunload=function(){var e=new Date,c={date:"["+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart(2,"0")+"]",author:q,sauce:"leaves the game"};return t.emit("message",c),t.emit("leaverTrigger"),null},Object(b.jsx)("div",{id:"wrapper",children:Object(b.jsxs)(S,{children:[Object(b.jsx)(F,{}),Object(b.jsxs)(I,{children:[Object(b.jsx)(D,{}),Object(b.jsx)(L,{children:Object(b.jsx)(V,{})})]})]})})},K=function(){return void 0!==typeof window&&(window.location="/"),null};c(111);var U=function(){return Object(b.jsx)(h,{children:Object(b.jsx)(r.a,{children:Object(b.jsxs)(o.c,{children:[Object(b.jsx)(o.a,{exact:!0,path:"/",component:G}),Object(b.jsx)(o.a,{component:K})]})})})};i.a.render(Object(b.jsx)(n.StrictMode,{children:Object(b.jsx)(U,{})}),document.getElementById("root"))}},[[156,1,2]]]);
//# sourceMappingURL=main.1552b6d7.chunk.js.map